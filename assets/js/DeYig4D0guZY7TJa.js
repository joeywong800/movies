import{g as e,r as s,j as t}from"./D-s6PRqiKBLBeb70.js";import{N as o,M as r,C as l,i as a,j as n}from"./DA4PljVLQAAvLRso.js";import{u as i}from"./BfZ2chxSRdnyRXRh.js";import{b as c,F as d,T as m,L as x,l as g}from"./DuhNfJysh32dzoQX.js";import"./DRKqkMc30zo_0ikY.js";import"./CW___00ulSquyL62.js";import"./CjwUcgDti5mGPnSD.js";import"./Dud8YmOKJJ5dkhIL.js";import"./BeLtu-UYPkietiDK.js";import"./LM2JspYDBI8LNjlT.js";import"./3aNFxleMQdjaFZtw.js";import"./DZoN2sFbwskeIicV.js";import"./CHM7ATolVvUmCGxc.js";import"./C91n56ZiE4zAzIep.js";import"./DQJ5WjrbKyvfGYDA.js";import"./CdjEVO9ucAe6ofNA.js";import"./BDEOJ3om1uRt4ddv.js";import"./Dzd9VM057lnHWOrh.js";const h=()=>{const[h]=e(),p=h.get("q")||h.get("query")||"",u=h.get("type"),[j,f]=s.useState(p),[b,v]=s.useState("collection"===u?"collections":"all"),{data:y,isLoading:N,isError:w}=i({queryKey:["search","media",p],queryFn:()=>a(p),enabled:!!p&&"collections"!==b}),{data:k,isLoading:C,isError:S}=i({queryKey:["search","collections",p],queryFn:()=>n(p),enabled:!!p&&("collections"===b||"all"===b)});s.useEffect(()=>{f(p)},[p]);const q=N||C,T=w||S,_=k?.results||[],F=y?y.filter(e=>e.poster_path&&("movie"===e.media_type||"tv"===e.media_type)&&("all"===b||e.media_type===("movies"===b?"movie":"tv"))):[],V=y?.filter(e=>"movie"===e.media_type).length||0,$=y?.filter(e=>"tv"===e.media_type).length||0,z=_.length,E="all"===b&&0===F.length&&0===_.length||"movies"===b&&0===F.length||"tv"===b&&0===F.length||"collections"===b&&0===_.length;return t.jsxs(t.Fragment,{children:[t.jsx(o,{}),t.jsx("div",{className:"min-h-screen pt-16 bg-background",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground/90",children:"Search"}),t.jsx("p",{className:"text-foreground/60",children:"Find your favorite movies, TV shows and collections"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",className:"w-full bg-secondary/50 border border-border/40 rounded-2xl py-4 px-6 pr-12 text-foreground placeholder:text-foreground/40 focus:outline-none focus:ring-2 focus:ring-brand/50 focus:border-transparent transition-all duration-300",placeholder:"Search movies, TV shows, collections...",value:j,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&j&&(window.location.href=`/search?q=${encodeURIComponent(j)}`)}}),t.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-brand hover:text-brand/80 transition-colors",onClick:()=>{j&&(window.location.href=`/search?q=${encodeURIComponent(j)}`)},children:t.jsx(c,{size:24})})]}),p&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{className:"px-4 py-2 rounded-full text-sm font-medium "+("all"===b?"bg-brand text-black":"bg-secondary/50 text-foreground hover:bg-secondary transition-colors"),onClick:()=>v("all"),children:"All Results"}),t.jsxs("button",{className:"px-4 py-2 rounded-full text-sm font-medium flex items-center "+("movies"===b?"bg-brand text-black":"bg-secondary/50 text-foreground hover:bg-secondary transition-colors"),onClick:()=>v("movies"),children:[t.jsx(d,{size:14,className:"mr-1.5"}),"Movies ",V>0&&`(${V})`]}),t.jsxs("button",{className:"px-4 py-2 rounded-full text-sm font-medium flex items-center "+("tv"===b?"bg-brand text-black":"bg-secondary/50 text-foreground hover:bg-secondary transition-colors"),onClick:()=>v("tv"),children:[t.jsx(m,{size:14,className:"mr-1.5"}),"TV Series ",$>0&&`(${$})`]}),t.jsxs("button",{className:"px-4 py-2 rounded-full text-sm font-medium flex items-center "+("collections"===b?"bg-brand text-black":"bg-secondary/50 text-foreground hover:bg-secondary transition-colors"),onClick:()=>v("collections"),children:[t.jsx(x,{size:14,className:"mr-1.5"}),"Collections ",z>0&&`(${z})`]})]}),q?t.jsx("div",{className:"flex justify-center items-center py-20",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(g,{className:"h-10 w-10 animate-spin text-brand mb-2"}),t.jsx("p",{className:"text-foreground/70",children:"Searching..."})]})}):T?t.jsx("div",{className:"py-20 text-center",children:t.jsx("p",{className:"text-lg text-foreground/70",children:"Something went wrong. Please try again."})}):E?t.jsxs("div",{className:"py-20 text-center",children:[t.jsxs("p",{className:"text-lg text-foreground/70",children:['No results found for "',p,'"']}),t.jsx("p",{className:"text-foreground/50 mt-2",children:"Try a different search term or explore our categories"})]}):t.jsxs("div",{className:"space-y-8",children:["collections"!==b&&F.length>0&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"all"===b?"Movies & TV Shows":"movies"===b?"Movies":"TV Series"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:F.map(e=>t.jsx(r,{item:e},e.id))})]}),("all"===b||"collections"===b)&&_.length>0&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Collections"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:_.map(e=>t.jsx(l,{collection:e},e.id))})]})]})]})]})})})]})};export{h as default};
