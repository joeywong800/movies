import{r as e,j as s}from"./D-s6PRqiKBLBeb70.js";import{N as r,M as t,g as a,a as n}from"./CjBMIK3HktuBPqZ_.js";import{u as i,b as o}from"./BfZ2chxSRdnyRXRh.js";import{r as l,F as d,X as c,l as m,k as x,A as u}from"./DuhNfJysh32dzoQX.js";import{A as f,m as g}from"./rok5ZiflEFTZ0mAl.js";import"./DRKqkMc30zo_0ikY.js";import"./CW___00ulSquyL62.js";import"./BOmSRhSE5z7Kpxtd.js";import"./Dud8YmOKJJ5dkhIL.js";import"./BeLtu-UYPkietiDK.js";import"./LM2JspYDBI8LNjlT.js";import"./3aNFxleMQdjaFZtw.js";import"./DZoN2sFbwskeIicV.js";import"./DpIj8wd6VUmqXzzl.js";import"./BDEOJ3om1uRt4ddv.js";import"./Dzd9VM057lnHWOrh.js";import"./CxGgxkmD02DlAHB9.js";import"./CdjEVO9ucAe6ofNA.js";const b=()=>{const[b,h]=e.useState(null),[j,p]=e.useState(!1),[y,v]=e.useState(""),N=e.useRef(null),{data:w,isLoading:k}=i({queryKey:["genres"],queryFn:()=>a("movie")}),{data:C,fetchNextPage:z,hasNextPage:P,isFetchingNextPage:F,isLoading:L,refetch:q}=o({queryKey:["moviesByGenre",b],queryFn:({pageParam:e=1})=>n(b||28,e),enabled:!!b,getNextPageParam:(e,s)=>{if(!(e.length<20))return s.length+1}}),G=C?.pages.flat()||[];e.useEffect(()=>{if(w&&w.length>0&&!b){const e=w.find(e=>"Action"===e.name);h(e?e.id:w[0].id)}},[w,b]),e.useEffect(()=>{b&&q()},[b,q]);const S=e.useCallback(e=>{L||(N.current&&N.current.disconnect(),N.current=new IntersectionObserver(e=>{e[0].isIntersecting&&P&&!F&&z()}),e&&N.current.observe(e))},[L,P,F,z]),A=()=>{p(!j)},B=k||L&&!G.length,E=w?.find(e=>e.id===b),I=w?.filter(e=>e.name.toLowerCase().includes(y.toLowerCase()));return s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsx("div",{className:"min-h-screen pt-16 bg-background",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[s.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-foreground/90 flex items-center",children:[s.jsx("span",{className:"w-1 h-8 bg-brand rounded-full mr-4"}),"Genres"]}),s.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 rounded-full border transition-all duration-300 "+(j?"bg-brand/10 text-brand border-brand/50":"bg-background/80 text-foreground/80 border-border/40 hover:text-foreground"),children:[s.jsx(l,{size:18}),"Browse Genres"]})]}),E&&s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("h2",{className:"text-xl font-semibold text-foreground/90 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-brand/20 flex items-center justify-center",children:s.jsx(d,{size:16,className:"text-brand"})}),E.name,s.jsxs("div",{className:"bg-brand/10 text-brand px-3 py-1 rounded-full text-sm font-medium",children:[G.length," movies"]})]})}),s.jsx(f,{children:j&&s.jsx(g.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:A,children:s.jsxs(g.div,{className:"bg-background border border-border/40 rounded-xl max-w-3xl w-full max-h-[80vh] overflow-hidden shadow-xl",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/20",children:[s.jsxs("h2",{className:"text-xl font-bold text-foreground/90 flex items-center gap-2",children:[s.jsx(d,{size:20,className:"text-brand"}),"Browse Genres"]}),s.jsx("button",{onClick:A,className:"text-foreground/60 hover:text-foreground transition-colors rounded-full p-1 hover:bg-secondary/40",children:s.jsx(c,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"relative mb-4",children:s.jsx("input",{type:"text",placeholder:"Search genres...",value:y,onChange:e=>v(e.target.value),className:"w-full bg-secondary/30 border border-border/30 rounded-lg py-2 px-4 text-foreground focus:outline-none focus:ring-2 focus:ring-brand/50 focus:border-transparent placeholder-foreground/50"})}),s.jsx("div",{className:"max-h-[50vh] overflow-y-auto pr-1 custom-scrollbar",children:k?s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(m,{className:"h-6 w-6 animate-spin text-brand"})}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:I?.map(e=>s.jsxs("button",{onClick:()=>{return s=e.id,h(s),void p(!1);var s},className:"text-left px-4 py-3 rounded-lg transition-all duration-300 flex items-center justify-between "+(b===e.id?"bg-brand text-background font-medium shadow-md shadow-brand/20":"text-foreground/80 bg-secondary/20 hover:bg-secondary/40 hover:text-foreground"),children:[s.jsx("span",{children:e.name}),b===e.id&&s.jsx(x,{size:16,className:"ml-2 opacity-80"})]},e.id))})})]})]})})}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6",children:G.map((e,r)=>s.jsx(g.div,{ref:r===G.length-1?S:void 0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:Math.min(r%10*.1,.5)},className:"movie-card-container h-full",children:s.jsx(t,{item:e})},e.id))}),F&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(m,{className:"h-8 w-8 animate-spin text-brand"})}),!F&&P&&s.jsx("div",{className:"flex justify-center mt-8",children:s.jsxs("button",{onClick:()=>z(),className:"bg-secondary/30 hover:bg-secondary/50 text-foreground/90 py-2 px-6 rounded-full flex items-center gap-2 transition-all",children:[s.jsx("span",{children:"Load more"}),s.jsx(u,{size:16,className:"text-brand"})]})}),0===G.length&&!B&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-2 text-center",children:[s.jsx(d,{size:48,className:"text-foreground/20"}),s.jsx("h3",{className:"text-xl font-semibold text-foreground/80",children:"No movies found"}),s.jsx("p",{className:"text-foreground/60 max-w-md",children:"We couldn't find any movies in this genre. Try selecting a different genre."})]})]})})]})};export{b as default};
